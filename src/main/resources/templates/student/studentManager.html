<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head th:replace="~{fragment/main::header}"></head>

<body>
    <div id="testheader" th:replace="~{fragment/main::navbar}"> </div>

</div>
    <!-- <div id="testsidebar">Hello World </div> -->
    <div class="container">
    <div class="sidenav" th:replace="~{fragment/main::sidebar}"> </div>
    <div class="main_contents">
        <div id="sub_content">
            <form th:action="@{/member/studentSearch}" method="post" class="row g-3 mt-3 ms-2">
                <div class="col-auto">
                    <label for="staticEmail2" class="visually-hidden">Student Id</label>
                    <input type="text" name="id" class="form-control" id="staticEmail2" placeholder="User ID">
                </div>
                <div class="col-auto">
                    <label for="inputPassword2" class="visually-hidden">Student Name</label>
                    <input type="text" name="name" class="form-control" id="inputPassword2" placeholder="User Name">
                </div>
                <div class="col-auto">
                    <label for="inputPassword2" class="visually-hidden">Course Name</label>
                    <input type="text" name="course" class="form-control" id="inputPassword2" placeholder="Course">
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary mb-3">Search</button>
                </div>
                <div class="col-auto">
                    <a th:href="@{/member/studentRegister}"><button type="button" class="btn btn-secondary">Add</button></a>
                </div>
            </form>

            <table class="table table-striped" id="table">
                <thead>
                <tr>
                    <th scope="col" >Profile</th>
                    <!-- <th scope="col" >Student ID</th> -->
                    <th scope="col">Student Name</th>
                    <th scope="col">Date of bitrh</th>
                    <th scope="col">Phone</th>
                    <th scope="col">Gender</th>
                    <th scope="col">Education</th>
                    <th scope="col">Course</th>
                    <th scope="col">Status</th>
                    <th scope="col">Update Detail</th> 
                </tr>
                </thead>
                <tbody>
                <tr th:each="s : ${student}">


                    <td><img  style="width: 120px; height: 100px;"  th:src="@{'data:image/jpeg;base64,'+${s.photoString}}"  alt="image" ></td>
                    <!-- <td th:text="${s.id}"></td> -->
                    <td th:text="${s.name}"></td>
                    <td th:text="${s.dob}"></td>
                    <td th:text="${s.phone}"></td>
                    <td th:text="${s.gender}"></td>
                    <td th:text="${s.education}"></td>
                    <td>
                         <p th:each="c:${s.courseList}" th:text="${c.name}"></p>
                    </td>
                    <td>
                        <a th:if="${s.status != null}" th:href="@{/member/studentStatus(id=${s.id})}"><button type="button" class="btn btn-success">AVAILABLE</button></a>
                        <a th:if="${s.status == null}" th:href="@{/member/studentStatus(id=${s.id})}"><button type="button" class="btn btn-danger">UNAVAILABLE</button></a>
                        <!-- <a th:unless="${s.status == 'PENDING'}" th:href="@{/admin/pending(id=${s.id})}"><button type="button" class="btn btn-danger">PENDING</button></a> -->
                    </td>
                    <td>
                        <button type="button"  data-bs-toggle="modal" th:attr="data-bs-target=|#model${s.id}|" class="btn btn-secondary">Update</button>
                    </td>
                 
                        <div class="modal fade" data-bs-validate="false"  th:id="|model${s.id}|" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalLabel">About course</h5>
                                </div>
                                <div   class="modal-body">
                                    <form th:action="@{/member/studentUpdate}" method="post" enctype="multipart/form-data" >

                                        <h2 class="col-md-6 text-dark mb-5 mt-4">Student Update</h2>
                                        <div class="row mb-4">
                                            <div class="col-md-2 text-dark"></div>
                                            <label for="name"  class="col-md-2 text-dark col-form-label">Name</label>
                                            <div class="col-md-6">
                                                <input type="text" name="name" th:value="${s.name}"  class="form-control" id="name" >
                                            </div>
                                        </div>
                                        <div class="row mb-4">
                                            <div class="col-md-2"></div>
                                            <label for="date"  class="col-md-2 text-dark col-form-label">Date of Birth</label>
                                            <div class="col-md-4">
                                                <input type="date" class="form-control"  th:value="${s.dob}"  name="dob" id="email"  >
                                            </div>
                                        </div>
                                        <div class="row mb-4">
                                            <div class="col-md-2"></div>
                                            <label for="Passowrd" class="col-md-2 text-dark col-form-label">Phone</label>
                                            <div class="col-md-6">
                                                <input type="text" name="phone" th:value="${s.phone}" class="form-control" id="name"  >
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-4">
                                            <div class="col-md-2"></div>
                                            <label for="userRole" class="col-md-2 text-dark col-form-label">Gender</label>
                                            <div class="col-md-6">
                                                <select name="gender" class="form-select" aria-label="Education" id="userRole">
                                                    <option th:selected="${s.gender =='MALE'}" value="MALE">Male</option>
                                                    <option th:selected="${s.gender=='FEMALE'}" value="FEMALE">Female</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mb-4">
                                            <div class="col-md-2"></div>
                                            <label for="userRole" class="col-md-2 text-dark col-form-label">Education</label>
                                            <div class="col-md-6">
                                                <select name="education" class="form-select" aria-label="Education" id="userRole">
                                                    <option th:selected="${s.gender =='DEGREE'}" value="DEGREE">DEGREE</option>
                                                    <option th:selected="${s.gender =='DIPLOMA'}" value="DIPLOMA">DIPLOMA</option>
                                                    <option th:selected="${s.gender =='CERTIFICATE'}" value="CERTIFICATE">CERTIFICATE</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-md-2"></div>
                                            <label for="userRole" class="col-md-2 col-form-label">Course</label>
                                            <div class="col-md-4 text-dark">
                                                <div th:each="c : ${course}">
                                                    <input th:checked="${s.courseString.contains(c.name)}" type="checkbox" th:text="${c.name}" th:value="${c.id}" name="courses" id="">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-md-2"></div>
                                            <label for="userRole" class="col-md-2 text-dark col-form-label">Status</label>
                                            <div class="col-md-6">
                                                <select name="status" class="form-select" aria-label="Education" id="userRole">
                                                    <option th:selected="${s.gender =='ACTIVE'}" value="ACTIVE">Active</option>
                                                    <option th:selected="${s.gender =='DELETED'}" value="DELETED">Deleted</option>
                                                </select>
                                            </div>
                                        </div>
                            
                                        <div class="row mb-4">
                                            <div class="col-md-2"></div>
                                            <label for="Passowrd" class="col-md-2 text-dark col-form-label">Photo</label>
                                            <div class="col-md-6">
                                                <input type="file" name="file" th:value="${s.file}"  class="form-control" id="name" required="required"  >
                                            </div>
                                        </div>
                                        <input type="hidden"  name="id" th:value="${s.id}">
                                        <div class="row mb-4">
                                            <div class="col-md-4"></div>
                            
                                            <div class="col-md-6">
                            
                            
                                                <button type="submit" class="btn btn-success col-md-4" data-bs-toggle="modal" data-bs-target="#exampleModal">Update</button>
                                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                                                     aria-hidden="true">
                                                    <div class="modal-dialog modal-dialog-centered">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="exampleModalLabel">Student Registration</h5>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                            
                                                                <h5 style="color: rgb(127, 209, 131);">Registered Succesfully !</h5>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-success col-md-2" data-bs-dismiss="modal">Ok</button>
                            
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                            
                                            </div>
                                        </div>
                                        </form>
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> 
                                </div>
                              </div>
                            </div>
                          </div>
                    

                    </tr>

                </tbody>
            </table>

            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Student Deletion</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                            <h5 style="color: rgb(127, 209, 131);">Are you sure want to delete !</h5>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-success col-md-2" data-bs-dismiss="modal">Ok</button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:replace="~{fragment/main :: footer}"></div>
<script th:replace="~{fragment/main :: script1}"></script>
<script th:replace="~{fragment/main :: script2}"></script>
<script th:replace="~{fragment/main :: script3}"></script>
<!-- <script th:replace="~{fragment/main :: script4}"></script> -->
</body>

</html>







<body>

</body>

